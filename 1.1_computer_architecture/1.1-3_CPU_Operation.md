# 1.1-3 CPU Operation (Registers, ALU, Control Unit)

The CPU is responsible for **fetching, decoding, and executing** instructions stored in memory.

- **ALU**: performs calculations
- **Control Unit**: reads and decodes instructions
- **Registers**: small, high-speed storage units

---

## ALU (Arithmetic Logic Unit)

- **Role**: Performs arithmetic (+, −), logical (AND, OR, NOT), and comparison operations
- **Output**: Operation result + status flags

### Key Flags

- Flags provide additional information about the result of an operation.
- Importantly, they are directly tied to **conditional branch instructions (jump, branch)**.
- **Zero Flag (ZF)**
    
    → Set to 1 if the result is zero
    
    Example: **`if (a == b)`** uses ZF in comparison operations
    
- **Sign Flag (SF)**
    
    → Set to 1 if the result is negative
    
    (Usually copies the most significant bit, MSB)
    
- **Carry Flag (CF)**
    
    → In unsigned operations, set to 1 if a carry (addition) or borrow (subtraction) occurs
    
    Example: **`255 + 1 = 0 (CF=1)`** in 8-bit unsigned
    
- **Overflow Flag (OF)**
    
    → Set to 1 if a signed operation exceeds the representable range
    
    Example: **`127 + 1 (8-bit signed) = -128`** → overflow occurs
    

---

## Control Unit (CU)

- **Role**: Instruction decoding, control signal generation, and **interrupt handling** is a key function
- **Inputs**: Clock signal, Instruction Register (IR), flag values, interrupt signals
- **Outputs**: Control signals to internal components (ALU, registers) and external devices (memory, I/O)

### Control Unit Implementation Types

- **Hardwired Control**: Circuit-based; fast but inflexible (typical in RISC)
- **Microprogrammed Control**: Microcode-based; flexible but slower (typical in CISC, e.g., x86)

---

## Registers

High-speed storage inside the CPU. **Critical for observing CPU operations.**

### Essential Registers

- **PC (Program Counter)**: Holds the address of the next instruction
    - Increments after instruction execution to fetch the next instruction
- **IR (Instruction Register)**: Holds the current instruction being executed
- **MAR (Memory Address Register)**: Stores the address of the memory being accessed
- **MBR/MDR (Memory Buffer/Data Register)**: Holds data transferred between memory and the CPU
- **Flag Register**: Stores ALU status flags (ZF, CF, OF, etc.)
- **General-Purpose Registers**: Store intermediate values (x86: EAX/EBX…, ARM: R0~R15)
    - Used by compilers to optimize performance by keeping frequently accessed variables in registers
