# 1.1-3 CPU 동작 (레지스터, ALU, 제어장치)

cpu는 메모리에 저장된 **명령어를 읽고(Fetch), 해석하고(Decode), 실행(Execute)**하는 역할이다

- 계산을 담당하는 **ALU**
- 명령어를 읽고 해석하는 **제어장치**
- 작은 임시 저장 장치인 **레지스터**

---

## ALU (Arithmetic Logic Unit)

- **역할**: 산술(+, −), 논리(AND, OR, NOT), 비교 연산 수행
- **출력**: 연산 결과 + 상태 플래그

### 주요 플래그

- 플래그는 연산 결과에 대한 추가적인 상태 정보이다
- 또한, 중요한점은 **”조건 분기 명령(jump, branch)**”과 직접 연결된다
    - **Zero Flag (ZF)**
        
        → 연산 결과가 0이면 1로 세팅
        
        예: **`if (a == b)`** 비교 연산 시 사용
        
    - **Sign Flag (SF)**
        
        → 연산 결과가 음수면 1
        
        (보통 최상위 비트(MSB)를 복사해둠)
        
    - **Carry Flag (CF)**
        
        → unsigned 연산에서 덧셈/뺄셈 시 자리올림(캐리)나 자리내림이 발생하면 1
        
        예: **`255 + 1 = 0 (CF=1)`**
        
    - **Overflow Flag (OF)**
        
        → signed 연산에서 표현 범위를 벗어났을 때 1
        
        예: **`127 + 1 (8비트 signed) = -128`** → 오버플로우 발생
        

---

## 제어장치(Control Unit, CU)

- **역할**: 명령어 해석, 제어 신호 발생, **인터럽트 처리가** 핵심 역할
- **입력**: 클럭 신호, 명령어 레지스터(IR), 플래그 값, 인터럽트 신호
- **출력**: CPU 내부(ALU, 레지스터) 및 외부(메모리, I/O) 제어 신호

### **제어장치 구현 방식**

- **하드와이어드 제어**: 회로 기반, 빠르지만 유연성 낮음 (RISC 계열)
- **마이크로프로그램 제어**: 마이크로코드 기반, 유연하지만 느림 (CISC, x86)

---

## 레지스터(Register)

CPU 내부의 초고속 임시 저장 장치. **CPU 동작을 관찰할 수 있는 핵심 지점**.

### 반드시 알아야 할 레지스터

- **PC (Program Counter)**: 다음 실행할 명령어 주소
    - 명령어 처리가 끝나면 카운터 값을 증가시켜 다음 명령어를 읽음
- **IR (Instruction Register)**: 현재 실행 중인 명령어
- **MAR (Memory Address Register)**: 접근할 메모리 주소
- **MBR/MDR (Memory Buffer/Data Register)**: 메모리와 주고받는 데이터
- **Flag Register**: ALU 결과 상태(ZF, CF, OF 등) 저장
- **범용 레지스터**: 연산 중간 값 저장 (x86: EAX/EBX…, ARM: R0~R15)
    - 컴파일러가 성능 최적화를 위해 변수를 레지스터에 두려고 할 때 사용
