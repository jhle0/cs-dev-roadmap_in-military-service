# 1.1-7 CPU Performance Metrics & Instruction Set Architecture (RISC vs CISC)

> Active recall
> 
> - What is the CPU Time formula?
> - What are the characteristics of RISC and CISC?
> - What is the difference between core, thread, and hardware thread?

---

## Performance Metrics

### 1. CPU Time (Execution Time)

- The fundamental formula for how long a program takes to run on a CPU:
    
    **CPU Time = Instruction Count Ã— CPI Ã— Clock Cycle Time**
    
    - **Instruction Count**: Depends on how efficient your code is.
        
        (Unnecessary loops, poor algorithms â†’ more instructions)
        
    - **CPI (Cycles Per Instruction)**: Depends on CPU design and instruction type.
        
        (Simple operation = ~1 cycle, complex operations = multiple cycles)
        
    - **Clock Cycle Time**: The CPUâ€™s clock speed (hardware property, not directly controlled by developers).

ðŸ‘‰ For developers: focus on reducing instruction count through better algorithms, and writing code that maps well to the CPUâ€™s strengths (lower CPI instructions).

---

### 2. IPC (Instructions Per Cycle)

- **IPC â‰ˆ 1 / CPI**
- Measures how many instructions a CPU can retire per clock cycle.
- Modern CPUs use pipelining and superscalar execution to increase IPC.

---

### 3. MIPS (Million Instructions Per Second)

- How many million instructions the CPU can execute per second.
- Simple throughput metric, but misleading:
    - MIPS can be higher for trivial instructions, even if the program runs slower overall.
- **Limitation**: A CPU with lower MIPS may still outperform one with higher MIPS if each instruction does more work.

---

### 4. What developers should care about

- **Algorithm & Data Structure choice** â†’ Directly impacts instruction count.
- **Memory access patterns** â†’ Affects cache efficiency and CPI.
- **Parallelism** (multithreading, SIMD, etc.) â†’ Helps CPUs reach higher IPC.

---

## Instruction Set Architecture (ISA)

ISA = the set of instructions the CPU understands and can execute.

### 1. RISC (Reduced Instruction Set Computer)

- Characteristics:
    - Simple, uniform instructions (often fixed length, e.g., 32-bit).
    - Most operations are register-to-register; memory access only via load/store.
- Pros: Easier pipelining, simpler hardware, faster execution.
- Examples: ARM, MIPS, RISC-V
- **Developer view**: Widely used in mobile/embedded (ARM) for efficiency.

---

### 2. CISC (Complex Instruction Set Computer)

- Characteristics:
    - Large, complex instruction set (variable length, 1â€“15 bytes).
    - One instruction can perform multiple actions (e.g., memory access + arithmetic).
- Pros: High code density (shorter programs).
- Cons: Hardware complexity, harder pipelining.
- Examples: x86 (Intel, AMD)
- **Developer view**: Dominant in PCs/servers (x86).

---

## Core and Thread Concepts

- **CPU Core (Physical Core)**
    - A physical processing unit inside the CPU capable of decoding and executing instructions.
    - More cores = more independent instruction streams can run in parallel.
- **Thread (Software Execution Unit)**
    - A sequence of instructions within a process.
    - Examples: Each browser tab runs on its own thread; games may use threads for graphics, audio, AI.
- **Hardware Thread (Logical Core / Hyper-Threading)**
    - Technique where a single physical core duplicates parts of its resources (like registers/pipelines) to run two threads simultaneously.
    - Example: Intel Hyper-Threading â€” a 4-core CPU appears as 8 logical cores to the OS.
    - Performance gain is typically 20â€“30%, not 2Ã—.
- **OS perspective**: A 4-core, 8-thread CPU is seen by the operating system as 8 separate CPUs, used as scheduling units.

---

## Multi-threaded Processors

- CPUs designed to support multiple threads per core.
- **SMT (Simultaneous Multi-Threading)**: Multiple threads share ALUs/pipeline resources within the same cycle.
- **Pros**: Reduces idle time, improves throughput, better multitasking performance.
- **Cons**: Can cause cache contention, and has led to security vulnerabilities (e.g., Spectre).
