## 컴퓨터 시스템 구성(CPU, 메모리, I/O)


> Active recall
> 
> - CPU, 메모리, I/O 각각의 역할을 **정확히 한 줄 정의**할 수 있다.
> - 주소/데이터/제어 버스가 **무엇을 싣는지**를 말할 수 있다.
> - “메모리 읽기(Read) 사이클”과 “쓰기(Write) 사이클”을 **신호 흐름 순서대로** 말할 수 있다.
> - MMIO를 한 줄 정의할 수 있다

### CPU

- 컴퓨터의 두뇌
- 명령어를 해석하고 연산하며 시스템을 지휘하는 역할
    - 레지스터 파일(PC, IR 포함), ALU, 제어장치(Control unit)

### 메모리(RAM)

- 명령어, 데이터를 주소를 통해서 꺼내서 사용할 수 있게 저장하는 공간

### I/O 장치

- 외부 세계와 데이터를 주고받게 해주는 장치
    - 보통 I/O 컨트롤러를 통해 CPU,메모리와 연결됨
    - 키보드, 마우스, 모니터, 프린터, 저장장치(HDD, SSD, USB, …), 통신장치(네트워크 카드, 모뎀, …)

---

### 주소, 데이터, 제어 버스

- **주소 버스(Address Bus)**: “어디”에 접근할지 나타내는 주소가 이동하는 통로 (단방향 : 마스터(CPU) → 메모리, I/O)
    - 주소·제어를 항상 CPU만 구동하는 것이 아니다. **DMA 컨트롤러도 마스터**가 될 수 있다.
- **데이터 버스(Data Bus)**: “무엇”을 주고 받는지, 즉 실제 데이터/명령어가 이동하는 통로 (양방향)
    - Read는 **메모리→CPU**, Write는 **CPU→메모리/장치** 방향
- **제어 버스**: **읽기/쓰기, 인터럽트, 버스 요청/허가, 대기(Ready/Wait), 리셋/클록** 등 “언제, 어떻게” 동작할지 알려 주는 제어 신호의 통로

---

### 메모리 접근 사이클

**READ**

- CPU가 **주소 버스**에 목표 주소를 올린다.
- CPU가 **제어 버스**에 **Memory Read**를 인가한다.
- 메모리는 READ 신호와 주소를 받아 내부 접근 후, 값을 **데이터 버스에 구동**한다(필요 시 **대기/완료 신호**로 타이밍 맞춤).
- CPU는 **데이터 버스의 값을 레지스터(예: MDR/R1)에 래치**한다.
- 제어 신호 해제·버스 해제 후 사이클 종료, 다음 단계로 진행한다

**Write**

- CPU가 **주소 버스**에 대상 주소를 올린다.
- CPU가 **데이터 버스**에 **쓸 데이터**를 올린다.
- CPU가 **제어 버스**에 **Memory Write**를 인가한다.
- 메모리는 해당 주소의 셀에 **데이터 버스의 값을 래치**한다(동기식이면 클록 에지에 맞춤).
- 제어 신호 해제·버스 해제, 사이클 종료.

---

### I/O 접근 방식

- **MMIO :** I/O 컨트롤러의 레지스터들이 주소 공간 일부에 배정됨. CPU는 메모리 읽기 쓰기와 동일한 방식으로 장치를 제어함
- **PIO(IN/OUT)** : 일부 ISA에서 포트 전용 명령(IN, OUT 명령어)으로 장치 레지스터를 접근한다.

- **I/O 컨트롤러의 레지스터**
    - 데이터 레지스터 - CPU와 I/O 사이에 데이터를 담음(버퍼 역할)
    - 상태 레지스터 - 작업 준비가 되었는지, 작업이 완료되었는지, 오류는 없는지 등의 상태 정보 저장
    - 제어 레지스터 - I/O가 수행할 내용에 대한 제어 정보와 명령을 저장
