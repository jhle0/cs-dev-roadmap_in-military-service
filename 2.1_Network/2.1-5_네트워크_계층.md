# 2.1-5 네트워크 계층

---

## 5.1 네트워크 계층 개요 (Network Layer Overview)

### 역할

- 네트워크 계층(Network Layer)은 **송신 호스트의 트랜스포트 계층 세그먼트를 수신 호스트의 트랜스포트 계층까지 전달**하는 역할을 담당함.
- IP 패킷(데이터그램)의 전달을 위해 **경로를 선택하고 포워딩**을 수행함.
- **라우터(router)** 는 이 과정에서 핵심 역할을 하며, 트랜스포트/애플리케이션 계층은 처리하지 않음.

> 트랜스포트 계층이 “프로세스 간 통신”을 제공한다면,
> 
> 
> 네트워크 계층은 “호스트 간 통신”을 담당한다.
> 

### 네트워크 계층의 두 주요 기능

| 기능 | 설명 | 위치 |
| --- | --- | --- |
| **포워딩 (Forwarding)** | 패킷이 라우터의 입력 포트에 도착했을 때, 올바른 출력 포트로 전달하는 작업 | **데이터 평면 (Data Plane)** |
| **라우팅 (Routing)** | 패킷이 출발지에서 목적지까지 갈 **최적 경로(Route)** 를 결정하는 과정 | **제어 평면 (Control Plane)** |
- **데이터 평면**: 하드웨어에서 실행, 매우 빠른 처리(나노초 단위)
- **제어 평면**: 경로 계산을 위한 소프트웨어 처리, 상대적으로 느림

### 포워딩 테이블 (Forwarding Table)

- 라우터는 **패킷 헤더의 목적지 주소 필드**를 사용하여
    
    **포워딩 테이블(Forwarding Table)** 에서 다음 홉(next hop)을 결정함.
    
- 테이블의 각 항목은 “목적지 주소 → 출력 인터페이스”의 매핑 정보를 가짐.
- 즉, “이 목적지라면 어떤 포트로 내보낼지”를 정의함.

### 제어 평면의 두 가지 접근 방식

### 1. 전통적 접근 (Per-Router Control)

- 각 라우터가 자체적으로 **라우팅 알고리즘을 실행**하여 포워딩 테이블을 계산함.
- 라우터들 간에 **라우팅 메시지를 교환**해 정보 동기화 (예: OSPF, RIP, BGP).
- 라우터가 **포워딩 + 라우팅** 기능을 모두 수행.

### 2. SDN 접근 (Software-Defined Networking)

- **라우팅 계산과 제어 기능을 중앙의 컨트롤러(Controller)** 로 분리.
- 라우터는 단순히 **포워딩만 수행**,
    
    컨트롤러가 **포워딩 테이블을 계산하고 배포**함.
    
- 컨트롤러는 신뢰성과 중복성을 위해 **데이터 센터**에 위치함.

> SDN은 “네트워크의 제어를 소프트웨어적으로 중앙화”한 방식으로,
> 
> 
> 현대 클라우드 인프라의 핵심 기술이다.
> 

### 네트워크 서비스 모델 (Network Service Model)

네트워크 계층이 제공할 수 있는 서비스의 예시는 다음과 같다.

| 서비스 유형 | 설명 |
| --- | --- |
| **보장된 전달 (Guaranteed Delivery)** | 패킷이 목적지까지 반드시 도착하도록 보장 |
| **지연 보장 (Guaranteed Delay)** | 일정 시간(예: 100ms 이하) 안에 전달 보장 |
| **순서 보장 (Ordered Delivery)** | 송신 순서대로 패킷 도착 보장 |
| **최소 대역폭 보장 (Minimum Bandwidth Guarantee)** | 특정 전송 속도를 보장하여 안정된 처리율 확보 |
| **보안 서비스 (Security Service)** | 출발지 암호화, 목적지 복호화를 통한 기밀성 보장 |

### 인터넷 네트워크 계층의 실제 서비스

- 인터넷의 IP 계층은 **최선형 서비스 (Best-Effort Service)** 만 제공한다.
- 즉, 다음은 **보장되지 않는다**:
    - 패킷이 반드시 목적지에 도착함을 보장하지 않음
    - 도착 순서가 유지되지 않을 수 있음
    - 지연 시간에 상한이 없음
    - 대역폭이 일정하지 않음

> IP는 “최선형(Best-Effort)” 원칙만 따르지만,
> 
> 
> 그 단순성과 확장성 덕분에 오늘날 대부분의 네트워크를 구성하고 있다.
>
